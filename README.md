# 北门清燕的博客 - hexo版

<p>
    <img alt="bmqy.net" src="https://image.bmqy.net/wp-content/uploads/2018/09/logo-1.png" width="150" height="150" style="margin-bottom: 10px;">
</p>

[![hexo.bmqy.net](https://img.shields.io/github/package-json/v/bmqy/hexo.bmqy.net?logo=data:image/x-icon;base64,AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAAAABMLAAATCwAAAAAAAAAAAACveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveVj///////+veViveViveViveViveViveViveViveViveViveViveViveVj///////+veViveVj///////////////////////////////////////////////+veViveViveViveViveViveViveViveViveVj///+veViveViveViveViveViveViveViveViveViveViveViveViveViveViveVj///+veViveViveViveViveViveViveViveViveViveViveViveViveViveViveVj///+veViveViveViveViveViveViveViveViveViveViveViveViveViveViveVj///+veViveViveViveViveViveViveViveViveViveViveViveViveViveViveVj///+veViveViveViveViveViveViveViveViveViveViveViveViveViveViveVj///+veViveViveViveViveVj///+veViveViveViveViveViveViveViveViveVj///+veViveViveViveViveVj///+veViveViveViveViveViveViveViveViveViveVj///+veViveViveVj///+veViveViveViveViveViveViveViveViveViveViveViveVj///////////+veViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveViveVgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&color=brightgreen "hexo.bmqy.net")](https://github.com/bmqy/hexo.bmqy.net "hexo.bmqy.net")
[![theme-next version](https://img.shields.io/badge/Next-%3E=8.12.3-important?logo=hexo&style=flat-square)](https://www.npmjs.com/package/hexo-theme-next "theme-next")
[![Required Hexo version](https://img.shields.io/badge/hexo-%3E=5.3.0-important?style=flat-square&logo=hexo)](https://hexo.io "hexo")
[![GitHub stars](https://img.shields.io/github/stars/bmqy/hexo.bmqy.net?style=social)](https://github.com/bmqy/hexo.bmqy.net/stargazers "github stars")
[![GitHub forks](https://img.shields.io/github/forks/bmqy/hexo.bmqy.net?style=social)](https://github.com/bmqy/hexo.bmqy.net/fork "github stars")

<!--START_SECTION:bmqy-->

## 博客目录(2023-05-06 13:39:51更新)

[测试AI](https://www.bmqy.net/2650.html)

[再次折腾hexo](https://www.bmqy.net/2649.html)

[docker部署freshrss](https://www.bmqy.net/2648.html)

[apifox自动导入apidoc接口数据](https://www.bmqy.net/2645.html)

[快捷指令：图床](https://www.bmqy.net/2637.html)

[七牛上传视频获取视频封面和缩略图](https://www.bmqy.net/2444.html)

[注销网站得慎重](https://www.bmqy.net/2364.html)

[【原创】ios捷径：捷径库](https://www.bmqy.net/2342.html)

[【原创】ios捷径：法定工作日打卡提醒](https://www.bmqy.net/2318.html)

[【原创】ios捷径：自动壁纸](https://www.bmqy.net/2312.html)

[【原创】ios捷径：倒班闹钟](https://www.bmqy.net/2287.html)

[idea找回执行git pull操作后，被覆盖的本地未提交的代码](https://www.bmqy.net/2274.html)

[altserver跳坑指北](https://www.bmqy.net/2254.html)

[Microsoft Store中的应用软件如何备份数据](https://www.bmqy.net/2237.html)

[卖盘](https://www.bmqy.net/2194.html)

[利用frp实现微软远程桌面管理内网电脑之不完全指北](https://www.bmqy.net/2174.html)

[【原创】越狱插件安装注意事项](https://www.bmqy.net/2088.html)

[api.closeFrameGroup的一些注意事项](https://www.bmqy.net/2081.html)

[【原创】ios捷径：我的心愿单](https://www.bmqy.net/1992.html)

[【原创】ios捷径：一键获取urlscheme](https://www.bmqy.net/1933.html)

[【原创】ios捷径：一键签到](https://www.bmqy.net/1874.html)

[【原创】ios捷径：百度搜索风云榜2.1.0](https://www.bmqy.net/1831.html)

[【原创】ios捷径：微博热搜榜2.0强势更新](https://www.bmqy.net/1798.html)

[ios捷径：bmqy捷径库](https://www.bmqy.net/1777.html)

[自定义IntelliJ IDEA配置和插件的存放目录，以方便同步idea配置](https://www.bmqy.net/1773.html)

[ajaxFileUpload上传成功也执行error方法](https://www.bmqy.net/1707.html)

[js格式化时间显示](https://www.bmqy.net/1454.html)

[h5移动端ios输入法软键盘导致fixed布局bug的解决方案](https://www.bmqy.net/1456.html)

[生命不息，折腾不止之“hexo”](https://www.bmqy.net/1457.html)

[echarts中tooltips自定义数据结构与样式](https://www.bmqy.net/1458.html)

[淘米辅助工具](https://www.bmqy.net/1459.html)

[聚名网辅助工具](https://www.bmqy.net/1460.html)

[仿站制作6](https://www.bmqy.net/1461.html)

[wordpress新添加页面显示评论](https://www.bmqy.net/1462.html)

[华为mate8（b584）root过程简要记录](https://www.bmqy.net/1463.html)

[自制chrome扩展：百度云分享链接一键登录](https://www.bmqy.net/1466.html)

[清燕的云集小店](https://www.bmqy.net/1467.html)

[吐槽百度翻译之离线翻译包](https://www.bmqy.net/1469.html)

[吐槽腾讯大王卡](https://www.bmqy.net/1471.html)

[idea配置less自动编译](https://www.bmqy.net/1473.html)

[使用chrome浏览器调试移动端web页面](https://www.bmqy.net/1474.html)

[idea编译less并使用autoprefixer](https://www.bmqy.net/1475.html)

[sublime自动编译less2css插件，保存时提示系统找不到指定文件](https://www.bmqy.net/1476.html)

[吐一吐中信的升白金](https://www.bmqy.net/1477.html)

[Android手机下输入框获取焦点时, 输入法挡住输入框bug的解决方法](https://www.bmqy.net/1478.html)

[wordpress头像不显示解决方法](https://www.bmqy.net/1480.html)

[ueditor百度编辑器添加自定义模板并设为默认](https://www.bmqy.net/1481.html)

[VMware-workstation 12 安装 Mac OS X 10.10](https://www.bmqy.net/1484.html)

[再咏咳](https://www.bmqy.net/1486.html)

[webstorm10配置less编译环境](https://www.bmqy.net/1487.html)

[数钱数到不愿醒，睡觉睡到腿抽筋儿](https://www.bmqy.net/1488.html)

[瞎子和近视的区别](https://www.bmqy.net/1491.html)

[一个坏人好事做的再多，也抵不上一件坏事毁的彻底](https://www.bmqy.net/1493.html)

[ie8使背景图片全屏显示的方法及问题](https://www.bmqy.net/1494.html)

[解决wordpress添加主题时列表中缩略图不显示的问题](https://www.bmqy.net/1495.html)

[仿站制作4](https://www.bmqy.net/1497.html)

[仿站制作3](https://www.bmqy.net/1498.html)

[仿站制作2](https://www.bmqy.net/1499.html)

[仿站作品1](https://www.bmqy.net/1500.html)

[wordpress在指定分类下的文章内容后显示自定义推广信息](https://www.bmqy.net/1496.html)

[生活就是做一点坏事，之后就再多做好事](https://www.bmqy.net/1502.html)

[wordpress重新安装出现“wordpress database error，can’t find file”错误](https://www.bmqy.net/1505.html)

[dedecms面包屑导航链接样式修改](https://www.bmqy.net/1506.html)

[使用“Standalone Sitemap Generator”工具生成sitemap.xml和sitemap.html网站地图](https://www.bmqy.net/1507.html)

[图片放入到indesign中后变亮、颜色都变浅的解决办法](https://www.bmqy.net/1509.html)

[2015上天班第一天](https://www.bmqy.net/1511.html)

[诺不轻信人不负我，言不轻诺我不负人](https://www.bmqy.net/1513.html)

[京城2015年的第一场雪](https://www.bmqy.net/1512.html)

[做梦也似大电影](https://www.bmqy.net/1515.html)

[dedecms增加新留言邮件提醒和后台留言管理模块](https://www.bmqy.net/1517.html)

[dedecms调用指定单一子栏目文章列表无内容的问题](https://www.bmqy.net/1519.html)

[如今这年头，宅在家里、不凑热闹也是一种自保地方式。](https://www.bmqy.net/1520.html)

[Active Server Pages 错误 ‘ASP 0107’解决办法](https://www.bmqy.net/1521.html)

[万网空间服务器上传网站后出现HTTP500.19错误](https://www.bmqy.net/1523.html)

[js获取鼠标当前所在页面位置](https://www.bmqy.net/1522.html)

[ueditor编辑器创建超链接时添加class样式](https://www.bmqy.net/1524.html)

[“上盈其志，下务其功。悠悠黄河，吾其济乎！”](https://www.bmqy.net/1529.html)

[到哪都有wifi的人](https://www.bmqy.net/1531.html)

[其实我不是强迫症](https://www.bmqy.net/1532.html)

[miui开启节省流量功能后数据流量不能使用的问题](https://www.bmqy.net/1533.html)

[治世之能臣，乱世之废柴](https://www.bmqy.net/1534.html)

[感觉不错的水天一色](https://www.bmqy.net/1536.html)

[蓝蓝的天上白云飘](https://www.bmqy.net/1539.html)

[差一点儿就拍中了闪电](https://www.bmqy.net/1540.html)

[吐一吐360的开机优化](https://www.bmqy.net/1543.html)

[白云依旧](https://www.bmqy.net/1544.html)

[早晨的雨，起早的景儿](https://www.bmqy.net/1547.html)

[雷鸣雨早](https://www.bmqy.net/1548.html)

[仰望天空](https://www.bmqy.net/1549.html)

[就止一张](https://www.bmqy.net/1550.html)

[为了有所为而有所拍](https://www.bmqy.net/1552.html)

[又一波儿天空来袭](https://www.bmqy.net/1553.html)

[警不能以警，察不能以察](https://www.bmqy.net/1554.html)

[燕美清照之天上的海](https://www.bmqy.net/1555.html)

[面对着巴西被7：1，我只想大笑三声“哇哈哈哈！让你们再赌球！”](https://www.bmqy.net/1556.html)

[再平和自然地表现,也掩盖不了内心地焦急](https://www.bmqy.net/1557.html)

[“Brackets-宋体”扩展](https://www.bmqy.net/1560.html)

[新版百度首页设置“新窗口打开搜索页”](https://www.bmqy.net/1561.html)

[什么是偶像，因为他像偶。](https://www.bmqy.net/1563.html)

[原地](https://www.bmqy.net/1568.html)

<!--END_SECTION:bmqy-->

## 关于本项目
### 博客目录
博客目录部分的生成受```https://github.com/zhaoolee/WordPressXMLRPCTools```项目启发，特此感谢。

特此贴一下对项目的魔改```https://github.com/bmqy/WordPressXMLRPCTools```,再次感谢[@zhaoolee](https://github.com/zhaoolee/)。
### 环境变量配置
- COS_BUCKET
- COS_REGION
- COS_SECRET_ID
- COS_SECRET_KEY
- SITE_URL
- TELEGRAM_TO
- TELEGRAM_TOKEN
- ~~FTP_HOST~~
- ~~FTP_PASSWORD~~
- ~~FTP_PORT~~
- ~~FTP_REMOTE~~
- ~~FTP_USERNAME~~

## Hexo配置
### 固定ID
固定ID推荐使用```hexo-abbrlink2```
- Add plugin to Hexo:
```
npm install hexo-abbrlink2 --save
```
- Modify permalink in ```config.yml``` file:
```
permalink: posts/:abbrlink/
```
- optional settings:
```
abbrlink:
  start: 1000 # the first id, default 0
```
## Next配置

### 创建标签云
默认无标签页，打开链接会```404```
创建标签页：
```
hexo new page tags
```
```
---
date: 2021-08-04 13:22:27
type: "tags"
---
```

### 创建分类页
默认无分类页，打开链接会```404```
创建分类页：
```
hexo new page categories
```
```
---
date: 2021-08-04 13:22:33
type: "categories"
---
```

### 自定义样式
```hexo```根目录下的```source```新增一个```_data```目录，在该目录下新建```styles.styl```，这个文件将存放我们自定义的样式，然后在```_config.next.yml```文件中```custom_file_path```选项里面将```style```那一行取消注释。
```
custom_file_path:
    #head: source/_data/head.njk
    #header: source/_data/header.njk
    #sidebar: source/_data/sidebar.njk
    #postMeta: source/_data/post-meta.njk
    #postBodyEnd: source/_data/post-body-end.njk
    #footer: source/_data/footer.njk
    #bodyEnd: source/_data/body-end.njk
    #variable: source/_data/variables.styl
    #mixin: source/_data/mixins.styl
    style: source/_data/styles.styl
```

### 添加备案号
```
footer:
    # Beian ICP and gongan information for Chinese users. See: https://beian.miit.gov.cn, http://www.beian.gov.cn
    beian:
        enable: true
        icp: xxxxxx
```


## 自动化部署
### COS
- Installation
```
npm install hexo-deployer-cos --save
```
- Options
You can configure in _config.yml as follows:
```
deploy:
  type: cos
  secretId: yourSecretId
  secretKey: yourSecretKey
  bucket: yourBucket
  region: yourRegion
```
> For projects that use pipelines, you may not want to expose COS properties in the project file, so we support getting them through environment variables.
```
COS_SECRET_ID=yourSecretId
COS_SECRET_KEY=yourSecretKey
COS_BUCKET=yourBucket
COS_REGION=yourRegion
```
> Environment variables have lower priority than _config.xml configuration
### FTPSync
- Install hexo-deployer-ftpsync.
```
npm install hexo-deployer-ftpsync --save
```
- Edit settings.
```
deploy:
  type: ftpsync
  host: <host>
  user: <user>
  pass: <password>
  remote: [remote]
  port: [port]
  ignore: [ignore]
  connections: [connections]
  verbose: [true|false]
```
### 文章更新时间设置：
> updated_option
>
> updated_option 控制了当 Front Matter 中没有指定 updated 时，updated 如何取值：
>
> mtime: 使用文件的最后修改时间。这是从 Hexo 3.0.0 开始的默认行为。
>
> date: 使用 date 作为 updated 的值。可被用于 Git 工作流之中，因为使用 Git 管理站点时，文件的最后修改日期常常会发生改变
>
> empty: 直接删除 updated。使用这一选项可能会导致大部分主题和插件无法正常工作。
use_date_for_updated 选项已经被废弃，将会在下个重大版本发布时去除。请改为使用 updated_option: 'date'。

### CDN缓存刷新
> 该方案参考自：https://segmentfault.com/a/1190000039707833
> 
> 腾讯云官方给我们提供了一个解决方案，可以在COS存储桶的函数计算->CDN缓存刷新函数中配置一个函数，参考截图：
![](https://image.bmqy.net/upload/WX20220806-220705@2x.png)
>
>但这个方案存在一个问题，由于我们的静态网站有默认索引页面index.html，而官方提供的这个函数只会刷新对应的文件的URL，而不会刷新索引URL，例如http://www.bytelife.net/index.html这个文件，通常我们的请求是http://www.bytelife.net/，因此官方的方案针对于静态网站来说不算完美。
>
>优化方案
>可以通过简单修改官方的函数来解决这个问题，点击刚刚创建的CDN缓存刷新函数列表中的函数名称，将index.js文件内容替换为下面的代码，最后点击右上角的“部署”按钮即可：
``` js
/* eslint-disable no-param-reassign */
'use strict';

const TimeoutWatcher = require('./common/TimeoutWatcher');
const CosCdnRefreshTask = require('./common/CosCdnRefreshTask');
const { getParams, logger, getLogSummary } = require('./common/utils');

exports.main_handler = async (event, context) => {
  /**
   * set a timer to terminate the cdn refresh task, ensure log message is printed
   */
  let runningTask;
  const watcher = new TimeoutWatcher({
    timeLimit: context.time_limit_in_ms,
    trigger(error) {
      if (runningTask && runningTask.cancelTask) {
        runningTask.cancelTask(error);
      }
    },
    error: new Error('task is timeout'),
  });

  logger({
    title: 'param as follow: ',
    data: { event },
  });

  /**
   * parse param from event and process.env
   */
  const { secretId, secretKey, token, objects, triggerType, cdnHosts } =    getParams(event);

  logger({
    title: 'param is parsed success',
  });

  const taskResults = [];

  const task = new CosCdnRefreshTask({
    secretId,
    secretKey,
    token,
    objects,
    triggerType,
    cdnHosts,
  });

  if (watcher.isTimeout()) {
    // if current is timeout, trigger the cancel task in next tick
    process.nextTick(() => task.cancelTask(watcher.error));
  } else {
    runningTask = task;
  }

  const results = await task.runTask();
  results.forEach(item => {
    taskResults.push(item)
    // 如果以 /index.html 结尾，则增加目录首页/
    // 例如 https://www.xxxx.com/index.html, 则增加 https://www.xxxx.com/
    if(item.params.urls[0].lastIndexOf('/index.html') == (item.params.urls[0].length - 11)){
      taskResults.push(item.substr(0, item.length - 10))
    }
  });

  watcher.clear();

  logger({
    title: 'cos cdn refresh full logs:',
    data: taskResults,
  });

  const { status, messages } = getLogSummary({
    name: 'cos cdn refresh',
    results: taskResults,
  });

  logger({
    messages: messages.map(item => item.replace(/, /g, '\n')),
  });

  context.callbackWaitsForEmptyEventLoop = false;

  if (status === 'fail') {
    throw messages.join('; ');
  } else {
    return messages.join('; ');
  }
};
```
## 更多
更多说明详见：https://www.bmqy.net/2649.html
