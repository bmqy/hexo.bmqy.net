---
date: '2024-05-13 03:16'
updateTime: '2024-05-13T05:43:00.000Z'
sort: ''
catalog: []
status: 已发布
insertTime: '2024-05-13T03:16:00.000Z'
recommend: ''
_updated: ''
excerpt: 为了方便，为了好看，继续了哪吒面板的终极进化之路：VPS橱窗。我觉得可以叫做VPS小商城了，貌似该有的都有了，没有的以后可能还会有。。
summary: ''
_date: ''
tags:
  - 哪吒
  - 哪吒面板
  - VPS
  - 主题美化
  - 美化
updated: '2024-05-13 05:43'
cover: ''
categories:
  - 燕坊清作
abbrlink: 2665
urlname: 2024-05-13-哪吒面板终极进化之VPS橱窗
title: 哪吒面板终极进化之VPS橱窗
---

## 简介


为了方便，为了好看，继续了哪吒面板的终极进化之路：`VPS橱窗`。我觉得可以叫做`VPS小商城`了，貌似该有的都有了，没有的以后可能还会有。。


## 步骤

- 在`哪吒面板`、`设置界面`、`自定义代码（包括 style 和 script）`中添加下面这段`js`代码；
- 刷新即可看到效果
- [演示](https://nezha.887776.xyz/)，哪吒版本：`0.16.22`

## 特性

- 支持购买同款按钮
- 分组支持数量显示
- 支持价格、付款周期展示
- 支持多种联系方式展示
- 支持到期日期进度条展示

## 特殊说明

- 不限定所属分类，需要为每个小鸡指定`shop`字段，其值对应`affLinks`中的`key`
- `affLinks`中填写不同商家的邀请链接地址
- `contacts`中填写你需要的联系方式
- `contacts`中`main`标识需要显示在购买同款按钮旁边的联系方式
- `contacts`中的`icon`图标在这里查找：[https://semantic-ui.com/elements/icon.html](https://semantic-ui.com/elements/icon.html)
- 其它效果大家可自行发挥

```javascript
<script>
window.onload = function(){
	const affLinks = {
		crunchbits: 'https://get.crunchbits.com/order/lblk-yearly-kvm-ssd-vps/84',
		rainyun: 'https://www.rainyun.com/MjYzMTk=_',
		colocrossing: 'https://cloud.colocrossing.com/aff.php?aff=316',
		racknerd: 'https://my.racknerd.com/aff.php?aff=9727',
}
const contacts = {
  main: 'telegram',
  telegram: {
    label: 'TG',
    icon: 'telegram plane',
    url: 'https://t.me/bmqyChatBot'
  },
  qq: {
    label: 'QQ',
    icon: 'qq',
    url: 'https://wpa.qq.com/msgrd?V=1&Uin=88268459&Site=https://nezha.887776.xyz/&Menu=yes'
  },
  email: {
    label: 'Email',
    icon: 'mail',
    url: 'mailto:notice@bmqy.net'
  },
}
const extraData = {
  2: {
    pid: 0,
    shop: 'crunchbits',
    price: '$27.38',
    cycle: 'Year',
    start: '08/13/2023',
    expire: '08/13/2024'
  },
  15: {
    pid: 0,
    shop: 'crunchbits',
    price: '$22.69',
    cycle: 'Year',
    start: '04/08/2024',
    expire: '04/08/2025'
  },
  10: {
    pid: 358,
    shop: 'racknerd',
    price: '$10.98',
    cycle: 'Year',
    start: '11/14/2023',
    expire: '11/14/2024'
  },
  12: {
    pid: 23,
    shop: 'colocrossing',
    price: '$10.00',
    cycle: 'Year',
    start: '02/13/2024',
    expire: '02/13/2025'
  },
  13: {
    pid: 0,
    shop: 'rainyun',
    price: '￥245',
    cycle: 'Year',
    start: '07/03/2023',
    expire: '08/09/2024'
  },
  14: {
    pid: 0,
    shop: 'rainyun',
    price: '1500P',
    cycle: 'Week',
    start: '12/27/2023',
    expire: '∞'
  },
}
const cats = document.querySelectorAll('.ui.accordion');
cats.forEach((e, i)=>{
  let $catsTitle = e.querySelector('.title');
  let ct = $catsTitle.innerText;
  ct = ct.trim();	
  
  let $itemCard = e.querySelectorAll('.ui.card');
  let uiCardCount = $itemCard.length;
  $catsTitle.innerHTML = $catsTitle.innerHTML.replace(ct, ct+ ' ('+ uiCardCount +')');
  $itemCard.forEach((ee, ii)=>{
    let $content = ee.querySelector('.content');
    let $descriptionGrid = ee.querySelector('.description .ui.grid');
    let $itemTitle = $content.querySelector('.header');
    let id = ee.getAttribute('id');
    if(extraData[id]){
      let pid = extraData[id].pid;
      pid = parseInt(pid);
      let shop = extraData[id].shop;
      let price = extraData[id].price;
      let start = extraData[id].start;
      let expire = extraData[id].expire;
      let cycle = extraData[id].cycle;
      let $aButtonsBox = document.createElement('div');
      $aButtonsBox.setAttribute('style', 'margin-bottom: .5em;text-align:right;');
      let $aLinkButtons = document.createElement('div');
      $aLinkButtons.setAttribute('class', 'ui buttons mini');
      let $aLinkBuy = document.createElement('a');
      $aLinkBuy.setAttribute('class', 'ui button positive');
      $aLinkBuy.setAttribute('target', '_blank');
      $aLinkBuy.innerHTML = '购买同款';
      $aLinkBuy.href = affLinks[shop];
      if(pid){
        $aLinkBuy.href += '&pid='+ pid;
      }
      if(price){
        let $priceL = document.createElement('div');
        $priceL.setAttribute('class', 'three wide column');
        $priceL.innerHTML = '价格';
        $descriptionGrid.insertBefore($priceL, $descriptionGrid.childNodes[$descriptionGrid.childNodes.length-3]);
        let $priceR = document.createElement('div');
        $priceR.setAttribute('class', 'thirteen wide column');
        $priceR.innerHTML = '<div class="ui red label"><i class="money bill alternate yellow icon"></i>'+ price +'<a class="detail">'+ cycle +'</a></div>';
        $descriptionGrid.insertBefore($priceR, $descriptionGrid.childNodes[$descriptionGrid.childNodes.length-3])
      }
      if(expire){
        let $expireL = document.createElement('div');
        $expireL.setAttribute('class', 'three wide column');
        $expireL.innerHTML = '到期';
        $descriptionGrid.insertBefore($expireL, $descriptionGrid.childNodes[$descriptionGrid.childNodes.length-3])
        let $expireR = document.createElement('div');
        let beginTime = new Date(start).getTime();
        let endTime = new Date(expire).getTime();
        let nowTime = new Date().getTime();
        let aTime = (nowTime-beginTime);
        let bTime = (endTime-beginTime);
        let cTime = parseInt(aTime / bTime * 100);
        let progressType = 'error';
        let textStyle = 'text-shadow: 0px 0px 5px #db2828;';
        if(expire === '∞'){
          progressType = 'success';
          textStyle = '';
        }
        $expireR.setAttribute('class', 'thirteen wide column');
        $expireR.innerHTML = '<div class="ui progress '+ progressType +'"><div class="bar" style="transition-duration: 300ms; min-width: unset; background-color: orange; width: '+ cTime +'% !important;padding-left: 0.4em;"><small style="'+ textStyle +'">'+ expire +'</small></div></div>';
        $descriptionGrid.insertBefore($expireR, $descriptionGrid.childNodes[$descriptionGrid.childNodes.length-3])
      }
      $aLinkButtons.append($aLinkBuy);
      let $aLinkOr = document.createElement('div');
      $aLinkOr.innerHTML = '<div class="or" data-text="or"></div>';
      $aLinkButtons.append($aLinkOr);
      let $aLinkContactMain = document.createElement('a');
      $aLinkContactMain.setAttribute('class', 'ui button blue');
      $aLinkContactMain.setAttribute('target', '_blank');
      let mainContact = contacts['main'];
      $aLinkContactMain.innerHTML = contacts[mainContact].label;
      $aLinkContactMain.href = contacts[mainContact].url;
      $aLinkButtons.append($aLinkContactMain);
      $aButtonsBox.append($aLinkButtons);
      for(let key in contacts){
        if(key != 'main' && key != contacts['main']){
          let icon = contacts[key].icon;
          let $aLinkContact = document.createElement('a');
          $aLinkContact.setAttribute('class', 'ui circular '+ icon +' mini icon button');
          $aLinkContact.setAttribute('target', '_blank');
          $aLinkContact.setAttribute('style', 'margin-left:.5em;');
          $aLinkContact.innerHTML = '<i class="'+ icon +' icon"></i>';
          $aLinkContact.href = contacts[key].url;
          $aButtonsBox.append($aLinkContact);
        }
      }
      $content.append($aButtonsBox);
      
    }
  });
});
}
</script>
```


## 效果图


![QQ%E6%88%AA%E5%9B%BE20240513112916.png](https://image.bmqy.net/upload/947bdd6ae74c7f61899f708386734767.png)


![WX20240508-233030@2x.png](https://image.bmqy.net/upload/46adec9c6a9d7752a53ddd3d9309639a.png)

